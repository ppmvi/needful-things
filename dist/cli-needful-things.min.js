/*!
 * Needful things v1.4.1
 * Copyright 2019 Florian Weber - ppm visuals & internet GmbH
 * Released under the MIT License.
*/
import e from"@babel/runtime/regenerator";import t from"@babel/runtime/helpers/asyncToGenerator";import r from"rfg-api";import n from"pify";import o from"@babel/runtime/helpers/objectSpread";import a from"fs";import i from"path";import c from"ora";import u from"@babel/runtime/helpers/classCallCheck";import s from"@babel/runtime/helpers/createClass";import f from"tinify";import l from"inquirer";import p from"glob";import v from"log-symbols";import h from"chalk";import d from"@babel/runtime/helpers/typeof";var _,b=i.resolve(process.cwd(),"./.ppmvi.js");a.existsSync(b)&&(_=require(b).default.favicons||{});if(_&&_.master_picture&&"inline"===_.master_picture.type){var y=i.resolve(process.cwd(),_.master_picture.content);a.existsSync(y)&&(_.master_picture.content=a.readFileSync(y).toString("base64"))}const m=o({},{api_key:"",master_picture:{type:"url",url:""},files_location:{type:"path",path:"/static/icons"},favicon_design:{desktop_browser:{},ios:{picture_aspect:"background_and_margin",margin:"8",background_color:"#FFFFFF",assets:{ios6_and_prior_icons:!1,ios7_and_later_icons:!1,precomposed_icons:!1,declare_only_default_icon:!0}},windows:{picture_aspect:"white_silhouette",background_color:"#FFFFFF",assets:{windows_80_ie_10_tile:!0,windows_10_ie_11_edge_tiles:{small:!1,medium:!0,big:!1,rectangle:!1}}},android_chrome:{picture_aspect:"background_and_margin",margin:"12",background_color:"#FFFFFF",theme_color:"#FFFFFF",manifest:{name:"My sample app",display:"standalone",orientation:"portrait",start_url:"/"},assets:{legacy_icon:!1,low_resolution_icons:!1}},safari_pinned_tab:{picture_aspect:"black_and_white",threshold:60,theme_color:"#FFFFFF"}},settings:{compression:"5",scaling_algorithm:"Mitchell",error_on_image_too_small:!0,readme_file:!1,html_code_file:!1,use_path_as_is:!0}},_);function g(){return j.apply(this,arguments)}function j(){return(j=t(e.mark(function t(){var o,a,i,u=arguments;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>0&&void 0!==u[0]?u[0]:"./static/icons",a=c("Generating Favicons").start(),i=r.init(),e.prev=3,e.next=6,n(i.generateFavicon)(m,o);case 6:a.succeed(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.fail(e.t0.message);case 12:case"end":return e.stop()}},t,null,[[3,9]])}))).apply(this,arguments)}var w=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r};var F=function(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===r(a[u],u,a))break}return t}}();var O=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e,t){return e(t={exports:{}},t.exports),t.exports}var S="object"==d(k)&&k&&k.Object===Object&&k,A="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,z=S||A||Function("return this")(),C=z.Symbol,P=Object.prototype,T=P.hasOwnProperty,M=P.toString,E=C?C.toStringTag:void 0;var $=function(e){var t=T.call(e,E),r=e[E];try{e[E]=void 0;var n=!0}catch(e){}var o=M.call(e);return n&&(t?e[E]=r:delete e[E]),o},B=Object.prototype.toString;var D=function(e){return B.call(e)},I="[object Null]",L="[object Undefined]",U=C?C.toStringTag:void 0;var q=function(e){return null==e?void 0===e?L:I:U&&U in Object(e)?$(e):D(e)};var V=function(e){return null!=e&&"object"==d(e)},Y="[object Arguments]";var R=function(e){return V(e)&&q(e)==Y},W=Object.prototype,G=W.hasOwnProperty,N=W.propertyIsEnumerable,H=R(function(){return arguments}())?R:function(e){return V(e)&&G.call(e,"callee")&&!N.call(e,"callee")},J=Array.isArray;var K=function(){return!1},Q=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?z.Buffer:void 0,a=(o?o.isBuffer:void 0)||K;e.exports=a}),X=9007199254740991,Z=/^(?:0|[1-9]\d*)$/;var ee=function(e,t){var r=d(e);return!!(t=null==t?X:t)&&("number"==r||"symbol"!=r&&Z.test(e))&&e>-1&&e%1==0&&e<t},te=9007199254740991;var re=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=te},ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var oe=function(e){return V(e)&&re(e.length)&&!!ne[q(e)]};var ae=function(e){return function(t){return e(t)}},ie=x(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&S.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}),ce=ie&&ie.isTypedArray,ue=ce?ae(ce):oe,se=Object.prototype.hasOwnProperty;var fe=function(e,t){var r=J(e),n=!r&&H(e),o=!r&&!n&&Q(e),a=!r&&!n&&!o&&ue(e),i=r||n||o||a,c=i?O(e.length,String):[],u=c.length;for(var s in e)!t&&!se.call(e,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ee(s,u))||c.push(s);return c},le=Object.prototype;var pe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||le)};var ve=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),he=Object.prototype.hasOwnProperty;var de=function(e){if(!pe(e))return ve(e);var t=[];for(var r in Object(e))he.call(e,r)&&"constructor"!=r&&t.push(r);return t};var _e=function(e){var t=d(e);return null!=e&&("object"==t||"function"==t)},be="[object AsyncFunction]",ye="[object Function]",me="[object GeneratorFunction]",ge="[object Proxy]";var je=function(e){if(!_e(e))return!1;var t=q(e);return t==ye||t==me||t==be||t==ge};var we=function(e){return null!=e&&re(e.length)&&!je(e)};var Fe=function(e){return we(e)?fe(e):de(e)};var Oe=function(e,t){return function(r,n){if(null==r)return r;if(!we(r))return e(r,n);for(var o=r.length,a=t?o:-1,i=Object(r);(t?a--:++a<o)&&!1!==n(i[a],a,i););return r}}(function(e,t){return e&&F(e,t,Fe)});var ke=function(){this.__data__=[],this.size=0};var xe=function(e,t){return e===t||e!=e&&t!=t};var Se=function(e,t){for(var r=e.length;r--;)if(xe(e[r][0],t))return r;return-1},Ae=Array.prototype.splice;var ze=function(e){var t=this.__data__,r=Se(t,e);return!(r<0||(r==t.length-1?t.pop():Ae.call(t,r,1),--this.size,0))};var Ce=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]};var Pe=function(e){return Se(this.__data__,e)>-1};var Te=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Me(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Me.prototype.clear=ke,Me.prototype.delete=ze,Me.prototype.get=Ce,Me.prototype.has=Pe,Me.prototype.set=Te;var Ee=Me;var $e=function(){this.__data__=new Ee,this.size=0};var Be=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var De=function(e){return this.__data__.get(e)};var Ie,Le=function(e){return this.__data__.has(e)},Ue=z["__core-js_shared__"],qe=(Ie=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+Ie:"";var Ve=function(e){return!!qe&&qe in e},Ye=Function.prototype.toString;var Re=function(e){if(null!=e){try{return Ye.call(e)}catch(e){}try{return e+""}catch(e){}}return""},We=/^\[object .+?Constructor\]$/,Ge=Function.prototype,Ne=Object.prototype,He=Ge.toString,Je=Ne.hasOwnProperty,Ke=RegExp("^"+He.call(Je).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qe=function(e){return!(!_e(e)||Ve(e))&&(je(e)?Ke:We).test(Re(e))};var Xe=function(e,t){return null==e?void 0:e[t]};var Ze=function(e,t){var r=Xe(e,t);return Qe(r)?r:void 0},et=Ze(z,"Map"),tt=Ze(Object,"create");var rt=function(){this.__data__=tt?tt(null):{},this.size=0};var nt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ot="__lodash_hash_undefined__",at=Object.prototype.hasOwnProperty;var it=function(e){var t=this.__data__;if(tt){var r=t[e];return r===ot?void 0:r}return at.call(t,e)?t[e]:void 0},ct=Object.prototype.hasOwnProperty;var ut=function(e){var t=this.__data__;return tt?void 0!==t[e]:ct.call(t,e)},st="__lodash_hash_undefined__";var ft=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=tt&&void 0===t?st:t,this};function lt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lt.prototype.clear=rt,lt.prototype.delete=nt,lt.prototype.get=it,lt.prototype.has=ut,lt.prototype.set=ft;var pt=lt;var vt=function(){this.size=0,this.__data__={hash:new pt,map:new(et||Ee),string:new pt}};var ht=function(e){var t=d(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var dt=function(e,t){var r=e.__data__;return ht(t)?r["string"==typeof t?"string":"hash"]:r.map};var _t=function(e){var t=dt(this,e).delete(e);return this.size-=t?1:0,t};var bt=function(e){return dt(this,e).get(e)};var yt=function(e){return dt(this,e).has(e)};var mt=function(e,t){var r=dt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function gt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gt.prototype.clear=vt,gt.prototype.delete=_t,gt.prototype.get=bt,gt.prototype.has=yt,gt.prototype.set=mt;var jt=gt,wt=200;var Ft=function(e,t){var r=this.__data__;if(r instanceof Ee){var n=r.__data__;if(!et||n.length<wt-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new jt(n)}return r.set(e,t),this.size=r.size,this};function Ot(e){var t=this.__data__=new Ee(e);this.size=t.size}Ot.prototype.clear=$e,Ot.prototype.delete=Be,Ot.prototype.get=De,Ot.prototype.has=Le,Ot.prototype.set=Ft;var kt=Ot,xt="__lodash_hash_undefined__";var St=function(e){return this.__data__.set(e,xt),this};var At=function(e){return this.__data__.has(e)};function zt(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new jt;++t<r;)this.add(e[t])}zt.prototype.add=zt.prototype.push=St,zt.prototype.has=At;var Ct=zt;var Pt=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var Tt=function(e,t){return e.has(t)},Mt=1,Et=2;var $t=function(e,t,r,n,o,a){var i=r&Mt,c=e.length,u=t.length;if(c!=u&&!(i&&u>c))return!1;var s=a.get(e);if(s&&a.get(t))return s==t;var f=-1,l=!0,p=r&Et?new Ct:void 0;for(a.set(e,t),a.set(t,e);++f<c;){var v=e[f],h=t[f];if(n)var d=i?n(h,v,f,t,e,a):n(v,h,f,e,t,a);if(void 0!==d){if(d)continue;l=!1;break}if(p){if(!Pt(t,function(e,t){if(!Tt(p,t)&&(v===e||o(v,e,r,n,a)))return p.push(t)})){l=!1;break}}else if(v!==h&&!o(v,h,r,n,a)){l=!1;break}}return a.delete(e),a.delete(t),l},Bt=z.Uint8Array;var Dt=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var It=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Lt=1,Ut=2,qt="[object Boolean]",Vt="[object Date]",Yt="[object Error]",Rt="[object Map]",Wt="[object Number]",Gt="[object RegExp]",Nt="[object Set]",Ht="[object String]",Jt="[object Symbol]",Kt="[object ArrayBuffer]",Qt="[object DataView]",Xt=C?C.prototype:void 0,Zt=Xt?Xt.valueOf:void 0;var er=function(e,t,r,n,o,a,i){switch(r){case Qt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Kt:return!(e.byteLength!=t.byteLength||!a(new Bt(e),new Bt(t)));case qt:case Vt:case Wt:return xe(+e,+t);case Yt:return e.name==t.name&&e.message==t.message;case Gt:case Ht:return e==t+"";case Rt:var c=Dt;case Nt:var u=n&Lt;if(c||(c=It),e.size!=t.size&&!u)return!1;var s=i.get(e);if(s)return s==t;n|=Ut,i.set(e,t);var f=$t(c(e),c(t),n,o,a,i);return i.delete(e),f;case Jt:if(Zt)return Zt.call(e)==Zt.call(t)}return!1};var tr=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e};var rr=function(e,t,r){var n=t(e);return J(e)?n:tr(n,r(e))};var nr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var or=function(){return[]},ar=Object.prototype.propertyIsEnumerable,ir=Object.getOwnPropertySymbols,cr=ir?function(e){return null==e?[]:(e=Object(e),nr(ir(e),function(t){return ar.call(e,t)}))}:or;var ur=function(e){return rr(e,Fe,cr)},sr=1,fr=Object.prototype.hasOwnProperty;var lr=function(e,t,r,n,o,a){var i=r&sr,c=ur(e),u=c.length;if(u!=ur(t).length&&!i)return!1;for(var s=u;s--;){var f=c[s];if(!(i?f in t:fr.call(t,f)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var p=!0;a.set(e,t),a.set(t,e);for(var v=i;++s<u;){var h=e[f=c[s]],d=t[f];if(n)var _=i?n(d,h,f,t,e,a):n(h,d,f,e,t,a);if(!(void 0===_?h===d||o(h,d,r,n,a):_)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p},pr=Ze(z,"DataView"),vr=Ze(z,"Promise"),hr=Ze(z,"Set"),dr=Ze(z,"WeakMap"),_r=Re(pr),br=Re(et),yr=Re(vr),mr=Re(hr),gr=Re(dr),jr=q;(pr&&"[object DataView]"!=jr(new pr(new ArrayBuffer(1)))||et&&"[object Map]"!=jr(new et)||vr&&"[object Promise]"!=jr(vr.resolve())||hr&&"[object Set]"!=jr(new hr)||dr&&"[object WeakMap]"!=jr(new dr))&&(jr=function(e){var t=q(e),r="[object Object]"==t?e.constructor:void 0,n=r?Re(r):"";if(n)switch(n){case _r:return"[object DataView]";case br:return"[object Map]";case yr:return"[object Promise]";case mr:return"[object Set]";case gr:return"[object WeakMap]"}return t});var wr=jr,Fr=1,Or="[object Arguments]",kr="[object Array]",xr="[object Object]",Sr=Object.prototype.hasOwnProperty;var Ar=function(e,t,r,n,o,a){var i=J(e),c=J(t),u=i?kr:wr(e),s=c?kr:wr(t),f=(u=u==Or?xr:u)==xr,l=(s=s==Or?xr:s)==xr,p=u==s;if(p&&Q(e)){if(!Q(t))return!1;i=!0,f=!1}if(p&&!f)return a||(a=new kt),i||ue(e)?$t(e,t,r,n,o,a):er(e,t,u,r,n,o,a);if(!(r&Fr)){var v=f&&Sr.call(e,"__wrapped__"),h=l&&Sr.call(t,"__wrapped__");if(v||h){var d=v?e.value():e,_=h?t.value():t;return a||(a=new kt),o(d,_,r,n,a)}}return!!p&&(a||(a=new kt),lr(e,t,r,n,o,a))};var zr=function e(t,r,n,o,a){return t===r||(null==t||null==r||!V(t)&&!V(r)?t!=t&&r!=r:Ar(t,r,n,o,e,a))},Cr=1,Pr=2;var Tr=function(e,t,r,n){var o=r.length,a=o,i=!n;if(null==e)return!a;for(e=Object(e);o--;){var c=r[o];if(i&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=r[o])[0],s=e[u],f=c[1];if(i&&c[2]){if(void 0===s&&!(u in e))return!1}else{var l=new kt;if(n)var p=n(s,f,u,e,t,l);if(!(void 0===p?zr(f,s,Cr|Pr,n,l):p))return!1}}return!0};var Mr=function(e){return e==e&&!_e(e)};var Er=function(e){for(var t=Fe(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Mr(o)]}return t};var $r=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}};var Br=function(e){var t=Er(e);return 1==t.length&&t[0][2]?$r(t[0][0],t[0][1]):function(r){return r===e||Tr(r,e,t)}},Dr="[object Symbol]";var Ir=function(e){return"symbol"==d(e)||V(e)&&q(e)==Dr},Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ur=/^\w*$/;var qr=function(e,t){if(J(e))return!1;var r=d(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ir(e))||Ur.test(e)||!Lr.test(e)||null!=t&&e in Object(t)},Vr="Expected a function";function Yr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Vr);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(Yr.Cache||jt),r}Yr.Cache=jt;var Rr=Yr,Wr=500;var Gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g,Hr=function(e){var t=Rr(e,function(e){return r.size===Wr&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Gr,function(e,r,n,o){t.push(n?o.replace(Nr,"$1"):r||e)}),t});var Jr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Kr=1/0,Qr=C?C.prototype:void 0,Xr=Qr?Qr.toString:void 0;var Zr=function e(t){if("string"==typeof t)return t;if(J(t))return Jr(t,e)+"";if(Ir(t))return Xr?Xr.call(t):"";var r=t+"";return"0"==r&&1/t==-Kr?"-0":r};var en=function(e){return null==e?"":Zr(e)};var tn=function(e,t){return J(e)?e:qr(e,t)?[e]:Hr(en(e))},rn=1/0;var nn=function(e){if("string"==typeof e||Ir(e))return e;var t=e+"";return"0"==t&&1/e==-rn?"-0":t};var on=function(e,t){for(var r=0,n=(t=tn(t,e)).length;null!=e&&r<n;)e=e[nn(t[r++])];return r&&r==n?e:void 0};var an=function(e,t,r){var n=null==e?void 0:on(e,t);return void 0===n?r:n};var cn=function(e,t){return null!=e&&t in Object(e)};var un=function(e,t,r){for(var n=-1,o=(t=tn(t,e)).length,a=!1;++n<o;){var i=nn(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&re(o)&&ee(i,o)&&(J(e)||H(e))};var sn=function(e,t){return null!=e&&un(e,t,cn)},fn=1,ln=2;var pn=function(e,t){return qr(e)&&Mr(t)?$r(nn(e),t):function(r){var n=an(r,e);return void 0===n&&n===t?sn(r,e):zr(t,n,fn|ln)}};var vn=function(e){return e};var hn=function(e){return function(t){return null==t?void 0:t[e]}};var dn=function(e){return function(t){return on(t,e)}};var _n=function(e){return qr(e)?hn(nn(e)):dn(e)};var bn=function(e){return"function"==typeof e?e:null==e?vn:"object"==d(e)?J(e)?pn(e[0],e[1]):Br(e):_n(e)};var yn=function(e,t,r,n,o){return o(e,function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)}),r};var mn=function(e,t,r){var n=J(e)?w:yn,o=arguments.length<3;return n(e,bn(t,4),r,o,Oe)},gn=function(){function r(){u(this,r),this.getConfig(),f.key=this.config.tinify.key}return s(r,[{key:"run",value:function(){var r=t(e.mark(function t(){var r,n,o,u,s,p,v,h,d,_,b,y;return e.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setCompressionCount();case 2:return t.next=4,this.getFiles();case 4:return r=t.sent,t.next=7,l.prompt([{type:"checkbox",message:"Select the files which should be compressed.",name:"selectedFiles",pageSize:r.length,choices:r,validate:function(e){return!(e.length<1)||"You must at least choose one image."}}]);case 7:return n=t.sent,o=n.selectedFiles,t.next=11,l.prompt([{type:"confirm",message:"You are about to compress the selected images. Do you want to continue?",name:"compress",default:!0},{type:"confirm",message:"Do you want to add a compressed flag to the file name? eg. test_compressed.png",name:"addCompressFlag",default:!1}]);case 11:if(u=t.sent,s=u.compress,p=u.addCompressFlag,!s){t.next=40;break}v=!0,h=!1,d=void 0,t.prev=18,_=e.mark(function t(){var r,n,o,u,s,l,v,h,d;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.value,n=process.cwd()+r,o=i.dirname(n),u=i.extname(n),s=i.basename(n).replace(u,""),l=p?"_compressed":"",v=a.readFileSync(n),h=c("Compressing ".concat(s).concat(u)).start(),e.next=10,new Promise(function(e,t){f.fromBuffer(v).toBuffer(function(r,n){r&&t(r),e(n)})});case 10:d=e.sent,a.writeFileSync("".concat(o,"/").concat(s).concat(l).concat(u),d),h.succeed();case 13:case"end":return e.stop()}},t)}),b=o[Symbol.iterator]();case 21:if(v=(y=b.next()).done){t.next=26;break}return t.delegateYield(_(),"t0",23);case 23:v=!0,t.next=21;break;case 26:t.next=32;break;case 28:t.prev=28,t.t1=t.catch(18),h=!0,d=t.t1;case 32:t.prev=32,t.prev=33,v||null==b.return||b.return();case 35:if(t.prev=35,!h){t.next=38;break}throw d;case 38:return t.finish(35);case 39:return t.finish(32);case 40:case"end":return t.stop()}},t,this,[[18,28,32,40],[33,,35,39]])}));return function(){return r.apply(this,arguments)}}()},{key:"getFiles",value:function(){var r=t(e.mark(function t(){var r,o;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(p)(process.cwd()+"/src/**/*.{png,jpg,jpeg}",{});case 2:return r=e.sent,o="",e.abrupt("return",mn(r,function(e,t,r){var n=t.replace(process.cwd(),"");return o?o&&o!==i.dirname(n)&&(e.push(new l.Separator("----------")),o=i.dirname(n)):o=i.dirname(n),e.push({name:n,checked:!0,disabled:!!n.match(/compressed/)&&"Already compressed"}),e},[]));case 5:case"end":return e.stop()}},t)}));return function(){return r.apply(this,arguments)}}()},{key:"setCompressionCount",value:function(){var r=t(e.mark(function t(){return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(e,t){f.validate(function(r){r&&t(r),e()})});case 3:this.compressionsThisMonth=f.compressionCount,void 0===this.compressionsThisMonth?console.log(v.info,h.bold("Couldnt get the compressions count. You probably havent done any compressions.")):console.log(v.info,h.bold("You already used ".concat(this.compressionsThisMonth,"/500 free compressions this month."))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(v.error,h.bold("Looks like your key is not valid."));case 10:case"end":return e.stop()}},t,this,[[0,7]])}));return function(){return r.apply(this,arguments)}}()},{key:"getConfig",value:function(){var e=i.resolve(process.cwd(),"./.ppmvi.js"),t={};a.existsSync(e)&&(t=require(e).default),this.config=o({},{tinify:{key:""}},t)}}]),r}();function jn(){return wn.apply(this,arguments)}function wn(){return(wn=t(e.mark(function t(){var r;return e.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new gn,e.next=3,r.run();case 3:case"end":return e.stop()}},t)}))).apply(this,arguments)}export{g as generateFavicons,jn as tinify};
